# Part 2: What - AIエージェントとは何か、何を目指すのか

## 2.1 AIエージェントの本質：固定フローから柔軟な判断へ

### 2.1.1 従来の自動化（RPA/Workflow）の特徴

これまでの自動化技術は、**事前に定義されたルール**に基づいて動作する。

**RPAの例：**
```
1. Excelファイルを開く
2. A列のデータを読む
3. もしA列が"承認済"なら
   → B列をシステムに入力
4. 次の行へ
5. 繰り返し
```

**特徴：**
- 実行順序が固定
- 分岐条件が明示的
- 例外処理も事前にプログラム

**得意なこと：**
- 大量の定型作業
- 高速・正確な繰り返し処理
- 人間のミスを排除

**苦手なこと：**
- 想定外の状況への対応
- 文脈理解が必要な判断
- 柔軟な手順の変更

### 2.1.2 AIエージェントの特徴

AIエージェントは、**状況を見て判断しながら**動作する。

**AIエージェントの例：**
```
目標：「このメールに適切に対応せよ」

エージェントの思考プロセス：
1. メール内容を理解
2. 緊急度を判定
3. 必要な情報をデータベースから検索
4. 適切な対応方法を選択
   - 自動返信で済むか？
   - 人間にエスカレーションすべきか？
   - 他のシステムへの入力が必要か？
5. 実行
```

**特徴：**
- 実行順序を実行時に決定
- 自然言語で状況を理解
- 複数の選択肢から最適を選ぶ

**得意なこと：**
- 文脈理解が必要な判断
- 複数ツールの組み合わせ
- 半定型業務（パターンはあるが毎回微妙に違う）

**苦手なこと：**
- 100%の正確性（確率的に動作）
- リアルタイム性（推論に時間がかかる）
- コスト効率（APIコストが発生）

<br>

## 2.2 比較表：RPAとAIエージェントの違い

| 観点 | RPA | AIエージェント |
|------|-----|---------------|
| **実行順序** | 事前に固定 | 実行時に判断 |
| **分岐条件** | 明示的にプログラム | 自然言語で理解・判断 |
| **例外処理** | 事前に全パターン定義 | 未知の状況にも対応を試みる |
| **適用業務** | 完全定型業務 | 半定型・判断を伴う業務 |
| **正確性** | 100%（プログラム通り） | 高いが100%ではない |
| **開発者** | 業務部門でも可能 | ある程度の技術知識が必要 |
| **コスト** | ライセンス費用 | API利用料（従量課金） |
| **保守性** | 業務変更時に修正必要 | プロンプト調整で対応可能な場合も |
---

<br>

## 2.3 何が変わり、何が変わらないのか

### 変わらないもの

- **実行可能な処理（ツール）そのもの**
  - データベースへの問い合わせ
  - メール送信
  - ファイル操作
  - RPAフローの実行
  
- **セキュリティ要件**
  - アクセス制御
  - 監査ログ
  - 承認フロー

- **業務の副作用**
  - データ更新による影響範囲
  - 外部への通知
  - 金銭的なトランザクション

### 変わるもの

- **どのツールを使うかの判断方法**
  - 従来：プログラマが事前に決定
  - AI：LLMが状況を見て選択

- **実行順序の決定方法**
  - 従来：フローチャートで固定
  - AI：ゴールに向けて動的に計画

- **条件分岐の表現方法**
  - 従来：if/else文で明示
  - AI：自然言語での指示

<br>

## 2.4 私たちの目指すアーキテクチャ：協働モデル

**重要な認識：AIエージェントはRPAやDifyの「上位互換」ではない**

### 2.4.1 RPAの位置づけ

RPAは今後も以下の領域で不可欠：

- **大量データの高速処理**
  - 例：月次で10万件の請求書処理
  - AIエージェントでは遅すぎる＆コストが合わない

- **100%の正確性が求められる処理**
  - 例：給与計算、財務報告
  - 確率的な判断を許容できない

- **安定した定型業務**
  - 例：日次バックアップ、データ同期
  - わざわざAIで判断する必要がない

**AIエージェントとの協働例：**
```
1. AIエージェントが受信メールを分析
2. 「請求書」と判断したら
   → 既存のRPAフロー「請求書処理」を呼び出し
3. 「問い合わせ」と判断したら
   → 別の対応フローへ
```

### 2.4.2 Dify（ローコードAIアプリ）の位置づけ

Difyは**業務部門が自らAI機能を作れるツール**として価値がある：

- チャットボット作成
- 文書要約・分類
- 簡単なワークフロー自動化

**AIエージェントとの協働例：**
```
AIエージェント：「この文書を要約する必要がある」
  ↓
既存のDifyアプリ「契約書要約」を呼び出し
  ↓
要約結果を受け取って次の判断へ
```

### 2.4.3 従来システム（API/データベース）の位置づけ

既存の業務システムは**そのまま活用**：

- 顧客管理システム
- 在庫管理システム
- 会計システム

**AIエージェントとの協働例：**
```
AIエージェント：「顧客Aの過去の取引履歴を確認したい」
  ↓
既存の顧客管理システムAPIを呼び出し
  ↓
取得したデータをもとに提案を生成
```

<br>

## 2.5 協働モデルの全体像

```
┌─────────────────────────────────────┐
│        AIエージェント（制御中枢）        │
│  - 状況理解                           │
│  - 判断                               │
│  - ツール選択                         │
│  - 結果統合                           │
└─────────────────────────────────────┘
              ↓ 呼び出し
    ┌─────────┼─────────┬─────────┐
    ↓         ↓         ↓         ↓
┌─────┐  ┌─────┐  ┌─────┐  ┌─────┐
│ RPA  │  │ Dify │  │ API  │  │ 人間 │
│フロー│  │ アプリ│  │      │  │ 承認 │
└─────┘  └─────┘  └─────┘  └─────┘
既存資産をそのまま活用
```

**設計思想：**
- AIエージェントは「指揮者」
- 既存のツールは「演奏者」
- それぞれの得意分野を活かす

<br>

## 2.6 なぜこのアプローチが現実的か

### 投資の継続性

- 既存のRPA資産を捨てない
- Difyで作ったアプリも無駄にならない
- 段階的な移行が可能

### リスクの限定

- すべてをAIに置き換えるわけではない
- 重要な処理は従来通りRPAで安定稼働
- AIは「判断が必要な部分」に限定

### 組織の受容性

- 「RPAの次のステップ」として説明しやすい
- 急激な変化ではなく自然な進化
- 既存の自動化文化を活かせる
