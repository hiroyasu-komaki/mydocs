# ガードレール文書

## GR-504: クラウドFinOpsガードレール

### 1. メタデータ

| 項目 | 内容 |
|-----|------|
| **ガードレールID** | GR-504 |
| **対応ポリシー** | POL-500: IT投資・ポートフォリオ管理ポリシー |
| **バージョン** | 1.0 |
| **発行日** | 2025-02-08 |
| **次回レビュー** | 2025-08-08（半期） |
| **承認者** | CTO, CFO |
| **所管** | IT企画部門、FinOpsチーム |
| **参照標準** | FinOps Foundation Framework |

### 2. 目的とスコープ

**目的:**
クラウド支出の可視化、最適化、ガバナンスを確立し、ビジネス価値を最大化しつつコストを適正に管理する。

**スコープ:**
- 全クラウドサービスプロバイダー（AWS, Azure, GCP等）
- IaaS, PaaS, SaaS
- クラウドコスト管理のライフサイクル全般

<br>

## スタンダード

### 3. 具体的基準

#### 3.1 FinOps成熟度目標

| フェーズ | 現状 | 6ヶ月目標 | 12ヶ月目標 |
|---------|-----|-----------|-----------|
| **Inform（可視化）** | タグ付け率30% | タグ付け率80% | タグ付け率95% |
| **Optimize（最適化）** | 手動最適化のみ | 準自動化 | 自動化80% |
| **Operate（運用）** | 月次レビュー | 週次レビュー | リアルタイム最適化 |

#### 3.2 タグ付け要件（必須）

すべてのクラウドリソースに以下のタグを付与:

| タグキー | 必須/推奨 | 値の例 | 目的 |
|---------|----------|-------|------|
| **Environment** | 必須 | Production, Staging, Development | 環境識別 |
| **Owner** | 必須 | team-engineering, team-marketing | 責任者識別 |
| **CostCenter** | 必須 | CC-1001, CC-2003 | コスト配賦 |
| **Project** | 必須 | project-alpha, project-beta | プロジェクト追跡 |
| **Application** | 必須 | app-crm, app-erp | アプリケーション識別 |
| **DataClassification** | 推奨 | Public, Internal, Confidential | セキュリティ |
| **AutoShutdown** | 推奨 | True, False | コスト最適化 |
| **BackupPolicy** | 推奨 | Daily, Weekly | 運用管理 |

**タグ付け期限:**
- 新規リソース: 作成から24時間以内
- 既存リソース: 3ヶ月以内に完了

**違反時の措置:**
- 警告通知（タグなし7日後）
- リソース停止予告（14日後）
- 強制停止（21日後、Productionは除く）

#### 3.3 予算・アラート設定

##### 3.3.1 予算設定（必須レベル）

| レベル | 対象 | 予算設定必須 | 設定期限 |
|-------|------|-------------|---------|
| **全社** | 全クラウドプロバイダー合計 | 必須 | 年度開始時 |
| **ドメイン** | ドメイン単位 | 必須 | 年度開始時 |
| **プロジェクト** | 大型プロジェクト（月額50万円以上） | 必須 | プロジェクト開始時 |
| **環境** | Production, Staging, Development | 推奨 | 四半期開始時 |

##### 3.3.2 アラート設定（必須）

| アラート種別 | 閾値 | 通知先 | アクション |
|------------|------|-------|-----------|
| **予算警告** | 予算の70% | ドメインリーダー | 確認・調整 |
| **予算超過予測** | 予算の90% | ドメインリーダー + CTO | 是正計画提出 |
| **予算超過** | 予算の100% | CTO + CFO | 緊急対応 |
| **異常増加** | 前週比+50% | 技術リーダー | 原因調査 |
| **未使用リソース** | 7日間利用なし | リソースオーナー | 削除検討 |

#### 3.4 コスト最適化必須施策

##### 3.4.1 コンピュートリソース

| 施策 | 適用対象 | 期待効果 | 実施期限 |
|-----|---------|---------|---------|
| **Right-Sizing** | CPU使用率20%未満が7日間継続 | 20-40%削減 | 四半期毎 |
| **Auto-Scaling** | トラフィック変動があるアプリ | 15-30%削減 | 導入後3ヶ月 |
| **Auto-Shutdown** | 非Production環境 | 40-60%削減 | 即時 |
| **リザーブドインスタンス** | 安定稼働リソース（1年以上） | 30-50%削減 | 年次レビュー |
| **スポット/プリエンプティブル** | バッチ処理、非クリティカル | 60-80%削減 | 該当ワークロード |

**必須実施:**
- 非Production環境の業務時間外停止（月〜金 20:00〜8:00、土日終日）
- 未使用の開発環境の削除（30日間アクセスなし）

##### 3.4.2 ストレージ

| 施策 | 適用対象 | 期待効果 | 実施期限 |
|-----|---------|---------|---------|
| **ライフサイクルポリシー** | すべてのオブジェクトストレージ | 30-50%削減 | 導入後1ヶ月 |
| **ストレージクラス最適化** | アクセス頻度低いデータ | 20-40%削減 | 四半期毎 |
| **不要データ削除** | 90日間アクセスなし | 10-20%削減 | 月次 |
| **圧縮・重複排除** | 大容量ストレージ | 10-30%削減 | 該当データ |

**ライフサイクルポリシー例:**
```
30日経過: Standard → Infrequent Access
90日経過: Infrequent Access → Archive
365日経過: 削除検討（ログデータ等）
```

##### 3.4.3 ネットワーク

| 施策 | 適用対象 | 期待効果 |
|-----|---------|---------|
| **CDN活用** | 静的コンテンツ | データ転送費20-40%削減 |
| **リージョン最適化** | グローバル展開 | クロスリージョン転送削減 |
| **VPCエンドポイント** | AWS内部通信 | NAT Gateway費用削減 |

#### 3.5 Savings Plans / リザーブドインスタンス戦略

##### 3.5.1 購入基準

| 条件 | アクション |
|-----|-----------|
| 過去3ヶ月の平均使用率 > 80% | 1年コミットメント検討 |
| 過去6ヶ月の平均使用率 > 90% | 3年コミットメント検討 |
| 安定した長期稼働が確実 | リザーブドインスタンス優先 |
| ワークロード変動の可能性あり | Savings Plans優先（柔軟性） |

##### 3.5.2 購入プロセス

```
[使用率分析] → [候補リソース抽出] → [FinOpsチーム評価] → [CTO承認] → [購入]
```

**承認基準:**
- 1年コミットメント（総額500万円未満）: FinOpsチームリーダー
- 1年コミットメント（総額500万円以上）: CTO
- 3年コミットメント: CTO + CFO

**レビュー頻度:** 四半期毎

<br>

## ガードレール

### 4. 自律判断の境界（グリーンゾーン）

#### 4.1 ドメイン自律最適化可能

**条件:**
- ドメイン予算内
- 月額変動が±20%以内
- 既承認のアーキテクチャパターン
- コスト削減施策（Right-Sizing, Auto-Shutdownなど）

**必要なアクション:**
- 月次コストレビューでの報告
- タグ付け・予算設定の遵守

**判断者:** ドメインリーダー、技術リーダー

**例:**
- 開発環境のインスタンスサイズ変更
- 非稼働リソースの削除
- ストレージクラスの変更

### 5. 承認必要な範囲（イエローゾーン）

#### 5.1 FinOpsチーム承認必要

**条件（いずれか該当）:**
- 新規アーキテクチャパターンの採用
- 月額コスト増加が30%以上見込まれる
- リザーブドインスタンス購入（500万円未満）
- マルチリージョン展開

**必要なアクション:**
- コスト影響分析書の提出
- 代替案の検討
- FinOpsチームによるレビュー

**承認期限:** 1週間

**例:**
- 新しいマネージドサービスの採用
- Production環境のスケールアップ

#### 5.2 CTO承認必須

**条件（いずれか該当）:**
- 月額コスト増加が50%以上
- 新規CSPアカウントの開設
- リザーブドインスタンス購入（500万円以上）
- アーキテクチャの大幅変更

**必要なアクション:**
- ビジネスケース（簡易版）
- 詳細コスト分析
- リスク評価

**承認期限:** 2週間

### 6. 禁止・エスカレーション（レッドゾーン）

#### 6.1 禁止事項

| 禁止事項 | 理由 | 違反時の措置 |
|---------|------|-------------|
| タグなしリソース運用（21日超） | コスト配賦不能 | リソース強制停止 |
| 予算設定なしの大規模展開 | コスト管理不能 | デプロイブロック |
| 未承認CSPアカウント開設 | ガバナンス迂回 | アカウント削除 |
| Root権限での日常作業 | セキュリティリスク | アクセス停止 |
| コスト最適化レビュー未実施（3ヶ月） | 無駄な支出 | 予算執行停止 |

#### 6.2 技術的強制（自動化）

以下は技術的に自動実施:
- タグなしリソースへの警告通知
- 予算超過時のアラート
- 非Production環境の自動停止
- 未使用リソースの検出・通知

#### 6.3 即時エスカレーション事項

以下はCTO + CFOへ即座にエスカレーション:
- 月次コストが予算の150%超過
- 異常な急増（日次で前日比+100%）
- セキュリティ侵害によるコスト発生
- 予期しない大規模リソース作成

<br>

## ガードレール運用

### 7. 例外プロセス

#### 7.1 緊急スケールアウト

**適用条件:**
- トラフィック急増によるサービス停止リスク
- ビジネスクリティカルなイベント対応

**プロセス:**
1. 技術リーダーが即座に実施
2. 24時間以内にCTOへ報告
3. 48時間以内にコスト影響分析提出
4. 次回FinOpsレビューで正式承認

#### 7.2 PoC（概念実証）投資

**適用条件:**
- 新技術の評価
- 期間限定（最大3ヶ月）
- 上限設定必須

**プロセス:**
1. PoCプラン提出（目的、期間、上限額）
2. CTO承認
3. 専用タグ付与（Project=PoC-xxx）
4. 期間終了時の自動リソース削除

### 8. モニタリングと報告

#### 8.1 コストダッシュボード（リアルタイム）

**必須メトリクス:**
- 日次/月次/累計コスト（CSP別、ドメイン別）
- 予算消化率
- 前月比、前年同月比
- 上位コストリソース（Top 10）
- タグ付け率
- 最適化機会（削減可能額）

**アクセス:**
- 全社ダッシュボード: CTO, CFO, FinOpsチーム
- ドメインダッシュボード: ドメインリーダー + メンバー

#### 8.2 定期レビュー

| 頻度 | 参加者 | アジェンダ |
|-----|-------|-----------|
| **週次** | FinOpsチーム | 異常検知、アラート対応 |
| **月次** | FinOpsチーム + ドメインリーダー | コストレビュー、最適化施策 |
| **四半期** | CTO, CFO, ドメインリーダー | 戦略レビュー、予算調整 |

#### 8.3 報告要件

**月次レポート（全ドメイン必須）:**
- コスト実績 vs 予算
- 主要増減要因（Top 5）
- 実施した最適化施策と効果
- 次月の予測
- 課題とアクション

**提出期限:** 翌月5営業日以内

### 9. コスト配賦・チャージバック

#### 9.1 配賦ルール

**優先順位:**
1. タグベース配賦（Project, CostCenter）
2. リソース利用率ベース配賦
3. 均等配賦（最終手段）

**未タグリソースの扱い:**
- 全社共通コストとして中央予算に計上
- 該当ドメインへの警告

#### 9.2 チャージバック実施

**対象サービス:**
- 共通クラウドアカウント内のリソース
- 中央が管理する共有サービス

**課金サイクル:** 月次

**請求方法:**
- 実費チャージバック（タグベース）
- 詳細レポート添付

### 10. KPI

- **タグ付け率**: 目標95%以上
  - 計算: (タグ付きリソース数 / 全リソース数) × 100%
  - 測定: 週次
  
- **予算達成率**: 目標±10%以内
  - 計算: |(実績 - 予算) / 予算| × 100%
  - 測定: 月次
  
- **コスト削減率**: 目標15%以上（最適化施策による）
  - 計算: (削減額 / 最適化前コスト) × 100%
  - 測定: 四半期
  
- **最適化施策実施率**: 目標80%以上
  - 計算: (実施施策数 / 推奨施策数) × 100%
  - 測定: 四半期

- **未使用リソース比率**: 目標5%以下
  - 計算: (未使用リソースコスト / 全コスト) × 100%
  - 測定: 月次

### 11. FinOps文化の醸成

#### 11.1 トレーニング

**必須対象者:**
- すべてのクラウドリソース作成者
- ドメインリーダー、技術リーダー

**トレーニング内容:**
- FinOps基礎（年1回）
- コスト最適化テクニック（四半期1回）
- 新サービス・機能のコスト影響（随時）

#### 11.2 インセンティブ

**コスト削減インセンティブ:**
- 削減額の10%を次期プロジェクト予算に還元
- 優秀なコスト最適化事例の全社共有
- 年次表彰制度

<br>

## 付録

### 12. 関連文書

**上位文書:**
- POL-500: IT投資・ポートフォリオ管理ポリシー

**関連ガードレール:**
- GR-501: IT投資意思決定ガードレール
- GR-503: 予算管理・執行ガードレール
- GR-201: クラウド戦略・選択ガードレール（POL-200）

**外部標準:**
- FinOps Foundation Framework

**ツール:**
- クラウドコスト管理ツール（CloudHealth, Cloudability等）
- タグポリシー自動チェックツール
- コスト異常検知ツール

---
