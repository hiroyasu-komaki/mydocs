# ãƒ™ãƒ³ãƒ€ãƒ¼ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆæ”¯å‡ºåˆ†æãƒ„ãƒ¼ãƒ«

## æ¦‚è¦

ãƒ™ãƒ³ãƒ€ãƒ¼ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆã«ãŠã‘ã‚‹**æ”¯å‡ºã®å¯è¦–åŒ–ï¼ˆSpend Analysisï¼‰**ã‚’å®Ÿæ–½ã—ã€ã‚³ã‚¹ãƒˆå‰Šæ¸›ã®ã€Œå½“ãŸã‚Šã€ã‚’è¦‹ã¤ã‘ã‚‹ãŸã‚ã®Pythonåˆ†æãƒ„ãƒ¼ãƒ«ã§ã™ã€‚

CSVãƒ‡ãƒ¼ã‚¿ã‹ã‚‰è‡ªå‹•çš„ã«ä»¥ä¸‹ã‚’ç”Ÿæˆã—ã¾ã™ï¼š
- **8ç¨®é¡ã®åˆ†æCSV**: ãƒ™ãƒ³ãƒ€ãƒ¼åˆ¥ã€ã‚«ãƒ†ã‚´ãƒªåˆ¥ã€å˜ä¾¡åˆ†æãªã©
- **8ç¨®é¡ã®å¯è¦–åŒ–ã‚°ãƒ©ãƒ•**: ãƒ‘ãƒ¬ãƒ¼ãƒˆå›³ã€ç®±ã²ã’å›³ã€å††ã‚°ãƒ©ãƒ•ãªã©

## å¿…è¦è¦ä»¶

### Pythonç’°å¢ƒ
- Python 3.8ä»¥ä¸Š

### å¿…é ˆãƒ‘ãƒƒã‚±ãƒ¼ã‚¸
```
pandas>=1.3.0
numpy>=1.21.0
matplotlib>=3.4.0
seaborn>=0.11.0
```

### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
```bash
cd data_analyzer
pip install -r requirements.txt
```

## ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

```
data_analyzer/
â”œâ”€â”€ main.py                    # å®Ÿè¡Œã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”œâ”€â”€ requirements.txt           # ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸
â”œâ”€â”€ README.md                  # ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ modules/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ data_analyzer.py       # ãƒ‡ãƒ¼ã‚¿åˆ†æãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
â”‚   â””â”€â”€ data_visualizer.py     # ãƒ‡ãƒ¼ã‚¿å¯è¦–åŒ–ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
â”œâ”€â”€ in/                        # å…¥åŠ›CSVãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆå¿…é ˆï¼‰
â”‚   â”œâ”€â”€ vendors.csv
â”‚   â”œâ”€â”€ contracts.csv
â”‚   â”œâ”€â”€ orders.csv
â”‚   â””â”€â”€ services.csv
â”œâ”€â”€ out/                       # åˆ†æçµæœCSVï¼ˆè‡ªå‹•ç”Ÿæˆï¼‰
â””â”€â”€ png/                       # ã‚°ãƒ©ãƒ•ç”»åƒï¼ˆè‡ªå‹•ç”Ÿæˆï¼‰
```

## å…¥åŠ›ãƒ‡ãƒ¼ã‚¿å½¢å¼

**ãƒ†ãƒ¼ãƒ–ãƒ«é–“ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³:**
```
vendors (1) â”€â”€â”€ (N) contracts (1) â”€â”€â”€ (N) orders
   â”‚                    â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€(N)â”€â”€â”€â”€â”€â”€â”€â”€(N)
              services
```

### 1. vendors.csv (ãƒ™ãƒ³ãƒ€ãƒ¼ãƒã‚¹ã‚¿)
```csv
vendor_id,vendor_name,vendor_classification,industry,vendor_rating
V00001,æ ªå¼ä¼šç¤¾ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³,å¤§æ‰‹ä¼æ¥­,ITãƒ»ã‚·ã‚¹ãƒ†ãƒ é–‹ç™º,S
```

### 2. contracts.csv (å¥‘ç´„ãƒ‡ãƒ¼ã‚¿)
```csv
contract_id,vendor_id,contract_type,contract_status,start_date,end_date,total_contract_amount,monthly_amount,annual_amount,auto_renewal_flag,renewal_count
C00001,V00001,å›ºå®šé‡‘é¡ï¼ˆæœˆé¡ï¼‰,æœ‰åŠ¹,2023-01-01,2025-12-31,36000000,1000000,12000000,True,2
```

### 3. orders.csv (ç™ºæ³¨ãƒ‡ãƒ¼ã‚¿)
```csv
order_id,contract_id,service_category,order_date,order_amount
O00001,C00001,ITã‚·ã‚¹ãƒ†ãƒ é–‹ç™º,2024-01-15,5000000
```

### 4. services.csv (ã‚µãƒ¼ãƒ“ã‚¹è©³ç´°ãƒ‡ãƒ¼ã‚¿)
```csv
service_id,order_id,service_name,service_description,unit_price,quantity
S00001,O00001,ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆ,è¦ä»¶å®šç¾©ï½åŸºæœ¬è¨­è¨ˆ,2000000,1
```

## ä½¿ã„æ–¹

### åŸºæœ¬çš„ãªå®Ÿè¡Œæ–¹æ³•

```bash
# inãƒ•ã‚©ãƒ«ãƒ€ã«CSVãƒ•ã‚¡ã‚¤ãƒ«ã‚’é…ç½®
cd data_analyzer
python main.py
```

### å®Ÿè¡Œçµæœ

```
================================================================================
  ãƒ™ãƒ³ãƒ€ãƒ¼ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆæ”¯å‡ºåˆ†æ
================================================================================

ğŸ“‚ ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚“ã§ã„ã¾ã™...
  âœ“ ãƒ™ãƒ³ãƒ€ãƒ¼ãƒã‚¹ã‚¿: 20ä»¶
  âœ“ å¥‘ç´„ãƒ‡ãƒ¼ã‚¿: 50ä»¶
  âœ“ ç™ºæ³¨ãƒ‡ãƒ¼ã‚¿: 500ä»¶
  âœ“ ã‚µãƒ¼ãƒ“ã‚¹è©³ç´°: 63ä»¶

================================================================================
  STEP 1: ãƒ‡ãƒ¼ã‚¿åˆ†æ
================================================================================

ğŸ“Š ãƒ™ãƒ³ãƒ€ãƒ¼åˆ¥æ”¯å‡ºã‚’åˆ†æä¸­...
  âœ“ 14ãƒ™ãƒ³ãƒ€ãƒ¼ã®æ”¯å‡ºã‚’é›†è¨ˆã—ã¾ã—ãŸ
  âœ“ ç·æ”¯å‡ºé¡: Â¥238,810,740

...ï¼ˆä¸­ç•¥ï¼‰...

âœ… å…¨ã¦ã®åˆ†æçµæœã‚’ä¿å­˜ã—ã¾ã—ãŸ: ./out

================================================================================
  STEP 2: ãƒ‡ãƒ¼ã‚¿å¯è¦–åŒ–
================================================================================

ğŸ“Š ãƒ™ãƒ³ãƒ€ãƒ¼åˆ¥æ”¯å‡ºé¡TOP20ã‚°ãƒ©ãƒ•ã‚’ä½œæˆä¸­...
  âœ“ vendor_spend_top20.png

...ï¼ˆä¸­ç•¥ï¼‰...

âœ… å…¨ã¦ã®ã‚°ãƒ©ãƒ•ã‚’ä½œæˆã—ã¾ã—ãŸ: ./png
```

<br>

## å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«

### åˆ†æCSVï¼ˆ8ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰

| ãƒ•ã‚¡ã‚¤ãƒ«å | å†…å®¹ |
|-----------|------|
| `vendor_spend_analysis.csv` | ãƒ™ãƒ³ãƒ€ãƒ¼åˆ¥æ”¯å‡ºé¡ï¼ˆç´¯ç©æ§‹æˆæ¯”ä»˜ãï¼‰ |
| `pareto_analysis.csv` | ãƒ‘ãƒ¬ãƒ¼ãƒˆåˆ†æãƒ‡ãƒ¼ã‚¿ï¼ˆæ”¯å‡ºé¡é™é †ï¼‰ |
| `pareto_summary.csv` | ãƒ‘ãƒ¬ãƒ¼ãƒˆåˆ†æã‚µãƒãƒªãƒ¼ï¼ˆ80/20ãƒ«ãƒ¼ãƒ«æ¤œè¨¼ï¼‰ |
| `category_spend_analysis.csv` | ã‚µãƒ¼ãƒ“ã‚¹ã‚«ãƒ†ã‚´ãƒªåˆ¥æ”¯å‡º |
| `contract_type_spend_analysis.csv` | å¥‘ç´„å½¢æ…‹åˆ¥æ”¯å‡º |
| `unit_price_analysis.csv` | ã‚«ãƒ†ã‚´ãƒªåˆ¥å˜ä¾¡åˆ†æï¼ˆCVå€¤ã€ã°ã‚‰ã¤ãï¼‰ |
| `unit_price_details.csv` | å¥‘ç´„å˜ä¾¡è©³ç´°ãƒªã‚¹ãƒˆ |
| `auto_renewal_analysis.csv` | è‡ªå‹•æ›´æ–°å¥‘ç´„åˆ†æ |

### å¯è¦–åŒ–ã‚°ãƒ©ãƒ•ï¼ˆ8ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰

| ãƒ•ã‚¡ã‚¤ãƒ«å | ã‚°ãƒ©ãƒ•ç¨®é¡ | ç›®çš„ |
|-----------|----------|------|
| `vendor_spend_top20.png` | æ¨ªæ£’ã‚°ãƒ©ãƒ• | ãƒ™ãƒ³ãƒ€ãƒ¼åˆ¥æ”¯å‡ºTOP20 |
| `pareto_chart.png` | ãƒ‘ãƒ¬ãƒ¼ãƒˆå›³ | 80/20ãƒ«ãƒ¼ãƒ«ã®å¯è¦–åŒ– |
| `category_spend_pie.png` | å††ã‚°ãƒ©ãƒ• | ã‚«ãƒ†ã‚´ãƒªåˆ¥æ”¯å‡ºæ§‹æˆæ¯” |
| `category_spend_bar.png` | æ¨ªæ£’ã‚°ãƒ©ãƒ• | ã‚«ãƒ†ã‚´ãƒªåˆ¥æ”¯å‡ºè©³ç´° |
| `unit_price_boxplot.png` | ç®±ã²ã’å›³ | ã‚«ãƒ†ã‚´ãƒªåˆ¥å˜ä¾¡ã®ã°ã‚‰ã¤ã |
| `unit_price_comparison.png` | æ¨ªæ£’ã‚°ãƒ©ãƒ•+ã‚¨ãƒ©ãƒ¼ãƒãƒ¼ | å˜ä¾¡ã°ã‚‰ã¤ãä¸Šä½ã‚«ãƒ†ã‚´ãƒªï¼ˆCVå€¤ï¼‰ |
| `contract_type_spend.png` | æ¨ªæ£’ã‚°ãƒ©ãƒ• | å¥‘ç´„å½¢æ…‹åˆ¥å¹´é–“æ”¯å‡º |
| `auto_renewal_contracts.png` | å††ã‚°ãƒ©ãƒ•ï¼ˆ2åˆ†å‰²ï¼‰ | è‡ªå‹•æ›´æ–°å¥‘ç´„ã®ä»¶æ•°ãƒ»é‡‘é¡å†…è¨³ |


### åˆ†æãƒ»å¯è¦–åŒ–ãƒ•ã‚¡ã‚¤ãƒ«å¯¾æ¯”è¡¨

| No. | åˆ†æãƒ†ãƒ¼ãƒ | åˆ†æCSV | ã‚°ãƒ©ãƒ•ãƒ•ã‚¡ã‚¤ãƒ« | ã‚°ãƒ©ãƒ•ç¨®é¡ | ä¸»è¦ãªåˆ†æå†…å®¹ |
|-----|-----------|---------|--------------|----------|--------------|
| 1 | **ãƒ™ãƒ³ãƒ€ãƒ¼åˆ¥æ”¯å‡º** | `vendor_spend_analysis.csv` | `vendor_spend_top20.png` | æ¨ªæ£’ã‚°ãƒ©ãƒ• | ãƒ™ãƒ³ãƒ€ãƒ¼åˆ¥å¹´é–“æ”¯å‡ºé¡TOP20ã‚’ãƒ©ãƒ³ã‚­ãƒ³ã‚°è¡¨ç¤º |
| 2 | **ãƒ‘ãƒ¬ãƒ¼ãƒˆåˆ†æ** | `pareto_analysis.csv`<br>`pareto_summary.csv` | `pareto_chart.png` | ãƒ‘ãƒ¬ãƒ¼ãƒˆå›³<br>(æ£’+æŠ˜ã‚Œç·š) | æ”¯å‡ºã®80%ã‚’å ã‚ã‚‹ä¸Šä½ãƒ™ãƒ³ãƒ€ãƒ¼ã‚’ç‰¹å®š<br>80/20ãƒ«ãƒ¼ãƒ«ã®æ¤œè¨¼ |
| 3 | **ã‚«ãƒ†ã‚´ãƒªåˆ¥æ”¯å‡º** | `category_spend_analysis.csv` | `category_spend_pie.png` | å††ã‚°ãƒ©ãƒ• | ã‚µãƒ¼ãƒ“ã‚¹ã‚«ãƒ†ã‚´ãƒªåˆ¥æ”¯å‡ºã®æ§‹æˆæ¯” |
| 4 | **ã‚«ãƒ†ã‚´ãƒªåˆ¥æ”¯å‡º** | `category_spend_analysis.csv` | `category_spend_bar.png` | æ¨ªæ£’ã‚°ãƒ©ãƒ• | ã‚µãƒ¼ãƒ“ã‚¹ã‚«ãƒ†ã‚´ãƒªåˆ¥æ”¯å‡ºã®è©³ç´°æ¯”è¼ƒ |
| 5 | **å¥‘ç´„å˜ä¾¡åˆ†æ** | `unit_price_analysis.csv`<br>`unit_price_details.csv` | `unit_price_boxplot.png` | ç®±ã²ã’å›³ | ã‚«ãƒ†ã‚´ãƒªåˆ¥å¥‘ç´„å˜ä¾¡ã®ã°ã‚‰ã¤ãåˆ†å¸ƒ |
| 6 | **å¥‘ç´„å˜ä¾¡åˆ†æ** | `unit_price_analysis.csv`<br>`unit_price_details.csv` | `unit_price_comparison.png` | æ¨ªæ£’ã‚°ãƒ©ãƒ•<br>+ã‚¨ãƒ©ãƒ¼ãƒãƒ¼ | å˜ä¾¡ã°ã‚‰ã¤ããŒå¤§ãã„ã‚«ãƒ†ã‚´ãƒªTOP8<br>(CVå€¤ãƒ»æ¨™æº–åå·®è¡¨ç¤º) |
| 7 | **å¥‘ç´„å½¢æ…‹åˆ¥æ”¯å‡º** | `contract_type_spend_analysis.csv` | `contract_type_spend.png` | æ¨ªæ£’ã‚°ãƒ©ãƒ• | å¥‘ç´„å½¢æ…‹åˆ¥ã®å¹´é–“æ”¯å‡ºé¡æ¯”è¼ƒ |
| 8 | **è‡ªå‹•æ›´æ–°å¥‘ç´„** | `auto_renewal_analysis.csv` | `auto_renewal_contracts.png` | å††ã‚°ãƒ©ãƒ•<br>(2åˆ†å‰²) | è‡ªå‹•æ›´æ–°å¥‘ç´„ã®ä»¶æ•°ãƒ»é‡‘é¡å†…è¨³ |

---

<br>
<br>
<br>

**APPENDIX**

# æœªä½¿ç”¨ãƒ‡ãƒ¼ã‚¿ä¸€è¦§ï¼ˆå°†æ¥æ‹¡å¼µç”¨ï¼‰

## ä½¿ç”¨ã•ã‚Œã¦ã„ãªã„ãƒ‡ãƒ¼ã‚¿é …ç›®ä¸€è¦§

### **1. vendors ãƒ†ãƒ¼ãƒ–ãƒ« (13é …ç›®ä¸­8é …ç›®ãŒæœªä½¿ç”¨)**

| é …ç›®å | å‹ | èª¬æ˜ |
|--------|-----|------|
| `vendor_name_official` | string | ãƒ™ãƒ³ãƒ€ãƒ¼å(æ­£å¼åç§°) |
| `vendor_name_short` | string | ãƒ™ãƒ³ãƒ€ãƒ¼å(ç•¥ç§°) |
| `relationship_start_date` | date | å–å¼•é–‹å§‹æ—¥ |
| `years_of_business` | float | å–å¼•å¹´æ•° |
| `annual_spend` | integer | å¹´é–“å–å¼•ç·é¡ |
| `contract_count` | integer | å¥‘ç´„ä»¶æ•° |
| `primary_contact` | string | ä¸»è¦é€£çµ¡å…ˆ |
| `risk_level` | string | ãƒªã‚¹ã‚¯ãƒ¬ãƒ™ãƒ« |
| `notes` | string | å‚™è€ƒ |

<br>

### **2. contracts ãƒ†ãƒ¼ãƒ–ãƒ« (24é …ç›®ä¸­16é …ç›®ãŒæœªä½¿ç”¨)**

| é …ç›®å | å‹ | èª¬æ˜ |
|--------|-----|------|
| `contract_number` | string | å¥‘ç´„ç•ªå· |
| `contract_name` | string | å¥‘ç´„åç§° |
| `contract_start_date` | date | å¥‘ç´„é–‹å§‹æ—¥ |
| `contract_end_date` | date | å¥‘ç´„çµ‚äº†æ—¥ |
| `contract_duration_months` | integer | å¥‘ç´„æœŸé–“(æœˆæ•°) |
| `total_contract_amount` | integer | å¥‘ç´„é‡‘é¡åˆè¨ˆ |
| `contract_signed_date` | date | å¥‘ç´„ç· çµæ—¥ |
| `contract_department` | string | å¥‘ç´„æ‹…å½“éƒ¨é–€ |
| `contract_owner` | string | å¥‘ç´„æ‹…å½“è€… |
| `has_sla` | boolean | SLAå®šç¾©æœ‰ç„¡ |
| `has_kpi` | boolean | KPIå®šç¾©æœ‰ç„¡ |
| `termination_terms` | string | è§£ç´„æ¡ä»¶ |
| `payment_terms` | string | æ”¯æ‰•æ¡ä»¶ |
| `contract_file_location` | string | å¥‘ç´„æ›¸ä¿ç®¡å ´æ‰€ |

<br>

### **3. orders ãƒ†ãƒ¼ãƒ–ãƒ« (17é …ç›®ä¸­11é …ç›®ãŒæœªä½¿ç”¨)**

| é …ç›®å | å‹ | èª¬æ˜ |
|--------|-----|------|
| `order_date` | date | ç™ºæ³¨æ—¥ |
| `order_number` | string | ç™ºæ³¨ç•ªå· |
| `paid_amount` | integer | æ”¯æ‰•æ¸ˆé‡‘é¡ |
| `payment_due_date` | date | æ”¯æ‰•äºˆå®šæ—¥ |
| `ordering_department` | string | ç™ºæ³¨éƒ¨é–€ |
| `ordering_person` | string | ç™ºæ³¨æ‹…å½“è€… |
| `service_subcategory` | string | ã‚µãƒ¼ãƒ“ã‚¹ã‚µãƒ–ã‚«ãƒ†ã‚´ãƒª |
| `work_description` | string | æ¥­å‹™å†…å®¹æ¦‚è¦ |
| `deliverables` | string | æˆæœç‰© |
| `notes` | string | å‚™è€ƒ |

<br>

### **4. services ãƒ†ãƒ¼ãƒ–ãƒ« (å…¨27é …ç›®ãŒæœªä½¿ç”¨)**

| é …ç›®å | å‹ | èª¬æ˜ |
|--------|-----|------|
| `service_id` | string | ã‚µãƒ¼ãƒ“ã‚¹ID |
| `contract_id` | string | å¥‘ç´„ID |
| `vendor_id` | string | ãƒ™ãƒ³ãƒ€ãƒ¼ID |
| `service_name` | string | ã‚µãƒ¼ãƒ“ã‚¹å |
| `service_category` | string | ã‚µãƒ¼ãƒ“ã‚¹ã‚«ãƒ†ã‚´ãƒª |
| `service_subcategory` | string | ã‚µãƒ¼ãƒ“ã‚¹ã‚µãƒ–ã‚«ãƒ†ã‚´ãƒª |
| `service_description` | string | ã‚µãƒ¼ãƒ“ã‚¹å†…å®¹è©³ç´° |
| `service_scope` | string | æä¾›ç¯„å›² |
| `deliverable_definition` | string | æˆæœç‰©å®šç¾© |
| `sla_items` | string | SLAé …ç›® |
| `sla_target` | string | SLAç›®æ¨™å€¤ |
| `kpi_items` | string | KPIé …ç›® |
| `kpi_target` | string | KPIç›®æ¨™å€¤ |
| `performance_rating` | integer | å®Ÿç¸¾è©•ä¾¡ |
| `usage_frequency` | string | åˆ©ç”¨é »åº¦ |
| `actual_utilization_rate` | float | å®Ÿç¨¼åƒç‡ |
| `resource_count` | float | æä¾›äººæ•°/å·¥æ•° |
| `unit_price` | integer | å˜ä¾¡ |
| `unit_price_type` | string | å˜ä¾¡å˜ä½ |
| `business_criticality` | string | äº‹æ¥­ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«åº¦ |
| `replaceability` | string | ä»£æ›¿å¯èƒ½æ€§ |
| `service_start_date` | date | ã‚µãƒ¼ãƒ“ã‚¹é–‹å§‹æ—¥ |
| `last_used_date` | date | æœ€çµ‚åˆ©ç”¨æ—¥ |
| `notes` | string | å‚™è€ƒ |

---

<br>

## çµ±è¨ˆã‚µãƒãƒªãƒ¼

| ãƒ†ãƒ¼ãƒ–ãƒ« | å…¨é …ç›®æ•° | ä½¿ç”¨é …ç›®æ•° | æœªä½¿ç”¨é …ç›®æ•° | ä½¿ç”¨ç‡ |
|----------|----------|------------|--------------|--------|
| **vendors** | 13 | 5 | 8 | 38.5% |
| **contracts** | 24 | 8 | 16 | 33.3% |
| **orders** | 17 | 6 | 11 | 35.3% |
| **services** | 27 | 0 | 27 | 0.0% |
| **åˆè¨ˆ** | **81** | **19** | **62** | **23.5%** |

**å…¨81é …ç›®ä¸­ã€62é …ç›®(76.5%)ãŒæœªä½¿ç”¨**
